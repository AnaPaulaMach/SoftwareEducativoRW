{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nivel 4: Capa de Enlace</title>
    
    <!-- Favicon para Nivel 4 -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üîó</text></svg>">
    
    <link rel="stylesheet" href="{% static 'aplicacion/estudiante/niveles.css' %}">
    <link rel="stylesheet" href="{% static 'aplicacion/estudiante/capa4.css' %}">
    <link rel="stylesheet" href="{% static 'aplicacion/style.css' %}">
</head>
<body>
    {% if user.is_authenticated %}
    
    <h1 class="title" style="margin-top: 30px; margin-bottom: 10px;">AVENTURA TCP/IP: CARRERA DE CAPAS üèÅ</h1>

    <div class="game-area">
        
        <div class="game-profile-meta">
            Jugando como: <strong>{{ user.alias|default:user.username }}</strong> | Rol: {{ user.rol }}
        </div>
        
        <h2 style="color: #0077B6; margin-bottom: 5px;">Nivel 4: Capa de Enlace</h2>
        <p style="text-align: center; font-style: italic; margin-bottom: 15px;">Pregunta <span id="current-q-number">1</span> de <span id="total-questions">20</span>. ¬°Cada acierto te acerca a la Fibra √ìptica!</p>
        
        <div class="progress-bar-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>

        <form id="quiz-form" onsubmit="return false;"> 
            <div id="questions-container">
                </div>
            
            <div id="score-results" style="display: none;">
                <div class="score-display">Puntuaci√≥n Final: <span id="final-score"></span>/10</div>
                <div id="feedback-final" class="feedback"></div>
                
                <div id="review-container">
                    <h4>Revisi√≥n Detallada (Aciertos y Errores)</h4>
                    <div id="review-list"></div>
                </div>
            </div>

            <div class="nav-controls">
                <button type="button" id="prev-btn" disabled>‚Üê Anterior</button>
                <button type="button" id="check-btn">Verificar</button>
                <button type="button" id="next-btn" disabled>Siguiente ‚Üí</button>
                <button type="button" id="finish-btn" style="display:none;">Finalizar</button>
            </div>
        </form>

        <a href="{% url 'perfil_estudiante' %}" class="link-return" style="display: block; margin-top: 20px;">Volver al Men√∫ de Niveles</a>
    </div>

    <script>
        window.QUIZ_CONFIG = {
          saveResultUrl: "{% url 'save_quiz_result' %}",
          imgFibra: "{% static 'aplicacion/images/fibra.svg' %}",
          imgCat6: "{% static 'aplicacion/images/cat6.svg' %}",
          imgCat35: "{% static 'aplicacion/images/cat3_5.svg' %}"
        };

        // --------- BANCO DE PREGUNTAS (20 preguntas de Capa de Enlace) ---------
        window.QUIZ_QUESTIONS = [
          // 1. Situaci√≥n Hipot√©tica (ARP y Subredes)
          {
            id: 1,
            type: "mc",
            text: "Situaci√≥n: El Host A (111.111.111.111) quiere enviar un datagrama IP al Host B (222.222.222.222) que se encuentra en una subred diferente. La tabla ARP del Host A est√° vac√≠a. ¬øCu√°l es el contenido de la trama Ethernet que el Host A env√≠a a la red tras generar el paquete ARP?",
            options: [
              "Direcci√≥n Destino: MAC del Host B / Carga: Solicitud ARP preguntando \"¬øQui√©n tiene 222.222.222.222?\"",
              "Direcci√≥n Destino: FF-FF-FF-FF-FF-FF / Carga: Solicitud ARP preguntando \"¬øQui√©n tiene 111.111.111.110 (Router)?\"",
              "Direcci√≥n Destino: MAC del Router / Carga: Datagrama IP hacia Host B."
            ],
            correct_answer: "Direcci√≥n Destino: FF-FF-FF-FF-FF-FF / Carga: Solicitud ARP preguntando \"¬øQui√©n tiene 111.111.111.110 (Router)?\"",
            pista: "Record√° que un host solo puede entregar tramas a dispositivos que est√©n ‚Äúcerca‚Äù en la misma red f√≠sica.",
            explanation: "Cuando el destino est√° en otra subred, el host debe enviar el datagrama al router (gateway). Para hacerlo, necesita la MAC del router, por lo que env√≠a una solicitud ARP broadcast (FF-FF-FF-FF-FF-FF) preguntando por la IP del router."
          },
          // 2. Drag and Drop (Estructura de Trama ARP)
          {
            id: 2,
            type: "drag_drop",
            text: "Tarea: Arrastre los valores correctos a los campos de una trama de Consulta ARP (ARP Query).",
            drag_items: [
              { value: "A", label: "FF-FF-FF-FF-FF-FF" },
              { value: "B", label: "MAC del Emisor" },
              { value: "C", label: "IP que se quiere resolver" },
              { value: "D", label: "00-00-00-00-00-00 (Vac√≠o/Ignorado)" }
            ],
            drop_zones: [
              { function: "mac_dest", label: "Campo: Direcci√≥n MAC Destino de la Trama Ethernet" },
              { function: "mac_orig", label: "Campo: Direcci√≥n MAC Origen de la Trama Ethernet" },
              { function: "ip_obj", label: "Campo: Direcci√≥n IP Objetivo en el paquete ARP" },
              { function: "mac_obj", label: "Campo: Direcci√≥n MAC Objetivo en el paquete ARP" }
            ],
            correct_map: {
              mac_dest: "A",
              mac_orig: "B",
              ip_obj: "C",
              mac_obj: "D"
            },
            pista: "Si todav√≠a no conoc√©s a qui√©n entregar la trama, ¬øc√≥mo te asegur√°s de que llegue a quien pueda responder?",
            explanation: "En una consulta ARP, la MAC destino es broadcast (FF-FF-FF-FF-FF-FF) para que todos los hosts reciban la solicitud. La MAC objetivo en el paquete ARP se deja en ceros porque es lo que se est√° buscando."
          },
          // 3. Selecci√≥n M√∫ltiple (Direccionamiento MAC)
          {
            id: 3,
            type: "mc",
            text: "A diferencia de las direcciones IP que son jer√°rquicas, las direcciones MAC tienen una estructura plana. ¬øQu√© implicaci√≥n directa tiene esto para un adaptador de red (NIC)?",
            options: [
              "La direcci√≥n cambia cada vez que el adaptador se conecta a una subred distinta.",
              "El adaptador debe solicitar una direcci√≥n a un servidor DHCP de capa 2.",
              "La direcci√≥n es port√°til y no cambia, independientemente de d√≥nde se conecte el adaptador.",
              "Los switches no pueden aprender la ubicaci√≥n del adaptador."
            ],
            correct_answer: "La direcci√≥n es port√°til y no cambia, independientemente de d√≥nde se conecte el adaptador.",
            pista: "Kurose compara la direcci√≥n MAC con un n√∫mero de seguridad social (identidad fija) y la IP con un c√≥digo postal (ubicaci√≥n variable).",
            explanation: "Las direcciones MAC son √∫nicas y fijas para cada adaptador de red, asignadas por el fabricante. No cambian cuando el dispositivo se mueve a otra red, a diferencia de las direcciones IP que pueden cambiar seg√∫n la ubicaci√≥n."
          },
          // 4. Ordenar Secuencia (Algoritmo CSMA/CD en Ethernet)
          {
            id: 4,
            type: "sequence",
            text: "Ordene los pasos que realiza un adaptador Ethernet cuando ocurre una colisi√≥n durante la transmisi√≥n.",
            sequence_items: [
              { key: "1", label: "El adaptador detecta interferencia de se√±al mientras transmite." },
              { key: "2", label: "El adaptador aborta la transmisi√≥n y env√≠a una se√±al de interferencia (jam signal)." },
              { key: "3", label: "El adaptador entra en fase de espera exponencial (backoff)." },
              { key: "4", label: "El adaptador elige un valor K aleatorio del conjunto {0, 1, ... 2^n-1}." },
              { key: "5", label: "El adaptador espera K * 512 tiempos de bit y vuelve a escuchar el canal." }
            ],
            correct_sequence: ["1", "2", "3", "4", "5"],
            pista: "La se√±al de jam es crucial para asegurar que todos los dem√°s adaptadores en el cable tambi√©n detecten la colisi√≥n inmediatamente.",
            explanation: "El algoritmo CSMA/CD primero detecta la colisi√≥n, luego env√≠a una se√±al de jam para asegurar que todos detecten la colisi√≥n, entra en backoff exponencial, elige un tiempo aleatorio y espera antes de reintentar."
          },
          // 5. C√°lculo/Input Num√©rico (Backoff Exponencial)
          {
            id: 5,
            type: "mc",
            text: "En el algoritmo de backoff exponencial binario de Ethernet, despu√©s de experimentar la tercera colisi√≥n consecutiva para la misma trama, ¬øcu√°l es la probabilidad de que el nodo elija esperar 0 tiempos de bit antes de reintentar?",
            options: [
              "0.5 (1/2)",
              "0.25 (1/4)",
              "0.125 (1/8)",
              "0.33 (1/3)"
            ],
            correct_answer: "0.125 (1/8)",
            pista: "Despu√©s de n=3 colisiones, K se elige del conjunto {0,1,2,...2¬≥‚àí1}, es decir {0,1,‚Ä¶,7}. Hay 8 opciones posibles.",
            explanation: "Despu√©s de 3 colisiones, n=3, entonces K se elige del conjunto {0,1,2,...,2¬≥-1} = {0,1,2,3,4,5,6,7}, que tiene 8 valores. La probabilidad de elegir 0 es 1/8 = 0.125."
          },
          // 6. True/False (Protocolos de Acceso)
          {
            id: 6,
            type: "tf",
            text: "En un protocolo de toma de turnos (como el paso de testigo o Token Ring), si solo un nodo tiene datos para enviar, este puede transmitir continuamente a la tasa completa R del canal sin esperar, similar a como lo har√≠a en ALOHA.",
            options: ["Verdadero", "Falso"],
            correct_answer: "Falso",
            pista: "La desventaja de los protocolos de toma de turnos es que introducen un retardo de sondeo o paso de testigo; el nodo debe esperar a que le llegue el \"turno\" o el \"token\" aunque sea el √∫nico activo.",
            explanation: "En protocolos de toma de turnos, incluso si solo un nodo tiene datos, debe esperar a recibir el token o su turno en el ciclo de sondeo, lo que introduce latencia. En ALOHA puro, puede transmitir inmediatamente (aunque con riesgo de colisi√≥n)."
          },
          // 7. Situaci√≥n Hipot√©tica (Tabla de Conmutaci√≥n)
          {
            id: 7,
            type: "mc",
            text: "Contexto: Un Switch tiene su tabla de conmutaci√≥n vac√≠a. Recibe una trama en el Puerto 1 con Origen MAC: A y Destino MAC: B. Pregunta: ¬øQu√© dos acciones realiza el switch simult√°neamente?",
            options: [
              "Registra MAC A en Puerto 1 y descarta la trama.",
              "Registra MAC B en Puerto 1 y reenv√≠a la trama por todos los puertos.",
              "Registra MAC A en Puerto 1 e inunda (floods) la trama por todos los puertos excepto el 1.",
              "Env√≠a una consulta ARP al Puerto 1 y espera respuesta."
            ],
            correct_answer: "Registra MAC A en Puerto 1 e inunda (floods) la trama por todos los puertos excepto el 1.",
            pista: "El switch \"aprende\" observando el origen de las tramas entrantes. Si no conoce el destino, debe reenviar la trama a todos lados por si acaso el destinatario est√° en otro puerto.",
            explanation: "El switch aprende asociando la MAC de origen (A) con el puerto de entrada (1). Como no conoce d√≥nde est√° la MAC de destino (B), inunda la trama por todos los puertos excepto el de entrada para asegurar que llegue al destinatario."
          },
          // 8. Drag and Drop (Trama Ethernet 802.1Q)
          {
            id: 8,
            type: "drag_drop",
            text: "Tarea: En una trama Ethernet 802.1Q que viaja por un enlace troncal (trunk) VLAN, ¬ød√≥nde se inserta la etiqueta VLAN en relaci√≥n con los otros campos?",
            drag_items: [
              { value: "A", label: "Despu√©s de Dir. Origen, antes de Tipo" },
              { value: "B", label: "Antes de Dir. Destino" },
              { value: "C", label: "Despu√©s de Tipo, antes de Datos" },
              { value: "D", label: "Al final, despu√©s de CRC" }
            ],
            drop_zones: [
              { function: "posicion", label: "Posici√≥n de la Etiqueta VLAN en la cabecera Ethernet 802.1Q" }
            ],
            correct_map: {
              posicion: "A"
            },
            pista: "La etiqueta a√±ade 4 bytes a la cabecera est√°ndar para identificar a qu√© VLAN pertenece la trama y contiene el TPID y el VID.",
            explanation: "La etiqueta VLAN (Tag) se inserta despu√©s de la direcci√≥n de origen y antes del campo Tipo/Longitud original. Esto permite que la trama identifique a qu√© VLAN pertenece cuando viaja por un enlace troncal."
          },
          // 9. True/False (Dominios de Colisi√≥n)
          {
            id: 9,
            type: "tf",
            text: "Al reemplazar un Hub por un Switch en una red LAN, el dominio de colisi√≥n se ampl√≠a, haciendo que todos los nodos conectados sigan compitiendo por el mismo medio compartido, pero con mayor velocidad.",
            options: ["Verdadero", "Falso"],
            correct_answer: "Falso",
            pista: "El switch a√≠sla las interfaces; cada puerto del switch se convierte en su propio dominio de colisi√≥n independiente, eliminando colisiones entre nodos de puertos distintos.",
            explanation: "Un switch crea dominios de colisi√≥n separados para cada puerto, eliminando colisiones entre nodos conectados a puertos diferentes. Un hub, en cambio, crea un solo dominio de colisi√≥n compartido."
          },
          // 10. Identificar Anomal√≠a (Loop de Red)
          {
            id: 10,
            type: "mc",
            text: "Situaci√≥n: Un administrador conecta tres switches formando un tri√°ngulo f√≠sico para redundancia, pero olvida configurar el protocolo STP (Spanning Tree Protocol). De repente, la red se satura y las luces de los switches parpadean incesantemente. ¬øQu√© fen√≥meno est√° ocurriendo?",
            options: [
              "Tormenta de difusi√≥n (Broadcast Storm).",
              "Bloqueo de cabeza de l√≠nea (HOL).",
              "Agotamiento de direcciones DHCP."
            ],
            correct_answer: "Tormenta de difusi√≥n (Broadcast Storm).",
            pista: "Sin STP que bloquee l√≥gicamente un camino, las tramas de broadcast circulan infinitamente en bucle, consumiendo todo el ancho de banda.",
            explanation: "Sin STP, los switches forman un bucle f√≠sico. Las tramas de broadcast se reenv√≠an indefinidamente en el bucle, creando una tormenta de broadcast que satura la red y consume todo el ancho de banda disponible."
          },
          // 11. Unir Afirmaciones (T√©cnicas de Error)
          {
            id: 11,
            type: "drag_drop",
            text: "Tarea: Empareje la t√©cnica con su descripci√≥n.",
            drag_items: [
              { value: "A", label: "Paridad Bidimensional" },
              { value: "B", label: "Checksum (Suma de comprobaci√≥n)" },
              { value: "C", label: "CRC (Redundancia C√≠clica)" }
            ],
            drop_zones: [
              { function: "desc1", label: "Utiliza aritm√©tica de complemento a 1; com√∫n en capa de transporte (software)." },
              { function: "desc2", label: "Utiliza divisi√≥n polin√≥mica en aritm√©tica m√≥dulo 2; com√∫n en adaptadores de red (hardware)." },
              { function: "desc3", label: "Permite detectar y corregir un error de bit simple mediante una matriz de filas y columnas." }
            ],
            correct_map: {
              desc1: "B",
              desc2: "C",
              desc3: "A"
            },
            pista: "El CRC es mucho m√°s robusto y se implementa en hardware en la NIC, mientras que el Checksum es m√°s ligero para el software del OS.",
            explanation: "A-3: Paridad Bidimensional permite detectar y corregir errores mediante matrices. B-1: Checksum usa complemento a 1 y es com√∫n en software (capa de transporte). C-2: CRC usa divisi√≥n polin√≥mica y se implementa en hardware (NIC)."
          },
          // 12. C√°lculo/An√°lisis (CRC)
          {
            id: 12,
            type: "mc",
            text: "En el c√°lculo de CRC, si el generador G es 1001 (4 bits), ¬øcu√°ntos bits de cero (r) se deben a√±adir a los datos D antes de realizar la divisi√≥n polin√≥mica en el emisor?",
            options: [
              "4 bits.",
              "3 bits.",
              "8 bits (un byte)."
            ],
            correct_answer: "3 bits.",
            pista: "Se a√±aden r bits de ceros, donde r es el grado del generador G, o longitud de G menos 1 (r=len(G)‚àí1).",
            explanation: "Si G tiene 4 bits, su grado es 3 (el n√∫mero de bits menos 1). Por lo tanto, se a√±aden r=3 bits de ceros a los datos antes de realizar la divisi√≥n polin√≥mica."
          },
          // 13. Selecci√≥n M√∫ltiple (WiFi - Direcciones MAC)
          {
            id: 13,
            type: "mc",
            text: "En una trama 802.11 (WiFi) enviada desde un host inal√°mbrico hacia un Router a trav√©s de un Punto de Acceso (AP), ¬øqu√© direcci√≥n MAC contiene el campo Direcci√≥n 3?",
            options: [
              "La MAC del host inal√°mbrico (Origen).",
              "La MAC del Punto de Acceso (AP).",
              "La MAC de la interfaz del Router de pasarela."
            ],
            correct_answer: "La MAC de la interfaz del Router de pasarela.",
            pista: "La Direcci√≥n 3 es crucial para interconectar el BSS (aire) con la red cableada; el AP la usa para saber a qu√© router entregar el datagrama una vez convertido a Ethernet.",
            explanation: "En 802.11, la Direcci√≥n 3 contiene la MAC del destino final en la red cableada (el router). El AP usa esta direcci√≥n para saber a d√≥nde entregar el datagrama una vez que lo convierte a formato Ethernet."
          },
          // 14. True/False (MPLS)
          {
            id: 14,
            type: "tf",
            text: "Un router compatible con MPLS reenv√≠a los paquetes bas√°ndose en la direcci√≥n IP de destino y buscando la coincidencia con el prefijo m√°s largo en su tabla de reenv√≠o.",
            options: ["Verdadero", "Falso"],
            correct_answer: "Falso",
            pista: "MPLS act√∫a como una \"capa 2.5\"; reenv√≠a bas√°ndose en una etiqueta fija de longitud corta agregada al paquete, no mirando la IP de destino, lo que permite b√∫squedas m√°s r√°pidas.",
            explanation: "MPLS reenv√≠a bas√°ndose en etiquetas (labels) de longitud fija y corta, no en direcciones IP. Esto permite b√∫squedas m√°s r√°pidas en hardware y simplifica el reenv√≠o, actuando como una capa intermedia entre la capa de red y la de enlace."
          },
          // 15. Drag and Drop (Problema del Terminal Oculto)
          {
            id: 15,
            type: "drag_drop",
            text: "Escenario: Dos estaciones (A y C) quieren transmitir a B, pero A y C no se escuchan entre s√≠ por un obst√°culo f√≠sico. Tarea: Arrastre la soluci√≥n que mitiga las colisiones en este escenario 802.11.",
            drag_items: [
              { value: "A", label: "Detecci√≥n de Colisiones (CD)" },
              { value: "B", label: "Tramas RTS/CTS" },
              { value: "C", label: "Token Passing" }
            ],
            drop_zones: [
              { function: "sol", label: "Soluci√≥n que mitiga colisiones en el problema del terminal oculto" }
            ],
            correct_map: {
              sol: "B"
            },
            pista: "Como no pueden detectar colisiones directamente (CD), reservan el canal enviando una solicitud (RTS) y esperando que el AP confirme \"limpieza\" para enviar (CTS).",
            explanation: "RTS/CTS (Request to Send / Clear to Send) permite que las estaciones reserven el canal antes de transmitir. La estaci√≥n env√≠a RTS, el AP responde con CTS, y esto notifica a todas las estaciones cercanas (incluidas las que no se escuchan entre s√≠) que el canal est√° reservado."
          },
          // 16. Identificar Componente (Interfaz)
          {
            id: 16,
            type: "mc",
            text: "Seg√∫n la terminolog√≠a de Kurose, ¬øqu√© componente es la \"interfaz\" entre el software de la capa de enlace (driver) y el hardware f√≠sico de transmisi√≥n?",
            options: [
              "El Socket.",
              "El adaptador de red (NIC).",
              "El Bus PCI."
            ],
            correct_answer: "El adaptador de red (NIC).",
            pista: "La mayor parte de la capa de enlace se implementa en este adaptador; es donde el software se encuentra con el hardware.",
            explanation: "El adaptador de red (NIC) es la interfaz entre el software de la capa de enlace (implementado en el driver) y el hardware f√≠sico. Contiene la mayor parte de la funcionalidad de la capa de enlace."
          },
          // 17. Situaci√≥n Hipot√©tica (MTU y Fragmentaci√≥n)
          {
            id: 17,
            type: "mc",
            text: "Situaci√≥n: Un router recibe un datagrama IP de 4000 bytes. Debe enviarlo por un enlace Ethernet cuya MTU es 1500 bytes. ¬øQu√© sucede en la capa de enlace?",
            options: [
              "La capa de enlace fragmenta la trama Ethernet en tres tramas m√°s peque√±as.",
              "La capa de enlace rechaza el datagrama y pide a la capa de red que lo fragmente.",
              "La capa de enlace encapsula los datos en tres tramas distintas transparentemente."
            ],
            correct_answer: "La capa de enlace rechaza el datagrama y pide a la capa de red que lo fragmente.",
            pista: "La capa de enlace no fragmenta; tiene un l√≠mite r√≠gido de carga √∫til (MTU). Es el protocolo IP (capa 3) el que debe fragmentar su datagrama para ajustarse a la MTU de la capa de enlace.",
            explanation: "T√©cnicamente, es la capa de Red la que fragmenta el Datagrama IP para que quepa en la carga √∫til de la trama. La capa de enlace tiene un l√≠mite r√≠gido (MTU) y no fragmenta; simplemente rechaza datagramas que excedan su MTU."
          },
          // 18. True/False (Duplex)
          {
            id: 18,
            type: "tf",
            text: "En una red Ethernet moderna basada en switches (conmutadores), el protocolo CSMA/CD es innecesario y a menudo se desactiva porque los enlaces operan en modo Full-Duplex.",
            options: ["Verdadero", "Falso"],
            correct_answer: "Verdadero",
            pista: "En Full-Duplex con switches, un nodo puede enviar y recibir simult√°neamente sin colisiones; por lo tanto, no se necesita el protocolo de detecci√≥n de colisiones.",
            explanation: "En modo Full-Duplex, cada enlace puede transmitir y recibir simult√°neamente sin colisiones. Por lo tanto, CSMA/CD (que fue dise√±ado para detectar y manejar colisiones en medios compartidos) no es necesario y se desactiva."
          },
          // 19. Ordenar Estructura (Encapsulamiento en el Host)
          {
            id: 19,
            type: "sequence",
            text: "Ordene las direcciones que se utilizan al enviar un paquete a un host remoto (fuera de la subred).",
            sequence_items: [
              { key: "1", label: "Socket del navegador: www.google.com" },
              { key: "2", label: "Capa de Transporte: Puerto 80" },
              { key: "3", label: "Capa de Red: IP Destino (IP del servidor Google)" },
              { key: "4", label: "Capa de Enlace: MAC Destino (MAC del Router/Gateway local)" }
            ],
            correct_sequence: ["1", "2", "3", "4"],
            pista: "Aunque el destino final es Google (IP), la trama de enlace f√≠sico solo puede viajar hasta el siguiente salto inmediato (el Router).",
            explanation: "El encapsulamiento sigue el modelo de capas: primero se identifica el servicio (socket), luego el puerto de transporte, despu√©s la IP de destino final, y finalmente la MAC del siguiente salto (router) ya que la trama f√≠sica solo puede llegar al siguiente dispositivo en el enlace."
          },
          // 20. Drag and Drop (Switches de Centro de Datos)
          {
            id: 20,
            type: "drag_drop",
            text: "Tarea: Clasifique los tipos de switches en una arquitectura jer√°rquica de centro de datos.",
            drag_items: [
              { value: "A", label: "Router de Frontera" },
              { value: "B", label: "Switches de Agregaci√≥n / Nivel 2" },
              { value: "C", label: "Switch TOR (Top of Rack)" }
            ],
            drop_zones: [
              { function: "nivel1", label: "Nivel Superior" },
              { function: "nivel2", label: "Nivel Intermedio" },
              { function: "nivel3", label: "Parte Superior del Bastidor (Rack)" }
            ],
            correct_map: {
              nivel1: "A",
              nivel2: "B",
              nivel3: "C"
            },
            pista: "Los hosts (servidores blade) se conectan directamente al switch TOR, que a su vez se conecta a la jerarqu√≠a superior.",
            explanation: "En la arquitectura jer√°rquica de centro de datos: Nivel Superior = Router de Frontera (conecta con el exterior), Nivel Intermedio = Switches de Agregaci√≥n (conectan m√∫ltiples racks), Parte Superior del Rack = Switch TOR (conecta directamente a los servidores del rack)."
          }
        ];
      </script>
      <script src="{% static 'aplicacion/estudiante/juego_capa_4.js' %}"></script>
    {% else %}
        <h1>Acceso Denegado</h1>
        <p>Necesitas iniciar sesi√≥n para ver esta p√°gina.</p>
    </div>
    {% endif %}
    
    <!-- Footer -->
    <footer class="footer">
        <div class="footer-inner">
            <!-- Bloque izquierdo: Marca + cr√©ditos -->
            <div class="footer-left">
                <p class="footer-brand">Aventura TCP/IP</p>
                <p class="footer-meta">
                    Desarrollado por: Coria Luz Antonella, Proserpio Eliana Naily y Ana Paula Machado
                </p>
                <p class="footer-meta">
                    Asignatura Optativa: Inform√°tica Educativa ¬∑ Licenciatura en Sistemas de Informaci√≥n ¬∑ UNSE ¬∑ 2025
                </p>
                <!-- Bibliograf√≠a -->
                <p class="footer-meta footer-biblio">
                    Basado en contenidos de: Redes de Computadoras. Un Enfoque Descendente (7ma Ed.)
                </p>
                <!-- Uso √©tico de IA -->
                <p class="footer-meta footer-ai">
                    Herramientas de apoyo utilizadas: ChatGPT, Gemini y NotebookLM
                </p>
            </div>
            <!-- Bloque derecho: etiquetas -->
            <div class="footer-right">
                <span class="footer-tag">Proyecto acad√©mico</span>
                <span class="footer-tag footer-role">Versi√≥n 1.0</span>
            </div>
        </div>
    </footer>
</body>
</html>

